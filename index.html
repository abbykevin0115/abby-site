<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Abby 的粉紅生活日常</title>
  <style>
    :root {
      --pink: #f8d7e3;
      --cream: #fdf1f6;
      --rose: #f4bcd4;
      --white: #ffffff;
      --brown: #6b4b3c;
      --shadow: 0 18px 40px rgba(244, 188, 212, 0.45);
      --text: #57413a;
      --muted: #8c6f64;
      --transition: 180ms ease;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", sans-serif;
      color: var(--text);
      background: linear-gradient(180deg, var(--cream), var(--pink));
      scroll-behavior: smooth;
    }

    a { color: inherit; text-decoration: none; }

    header {
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 10;
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.8);
      border-bottom: 1px solid rgba(244, 188, 212, 0.6);
    }

    .nav {
      max-width: 1080px;
      margin: 0 auto;
      padding: 14px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .logo {
      font-weight: 800;
      letter-spacing: 1px;
      font-size: 18px;
      color: var(--brown);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logo .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--rose);
      display: inline-block;
      box-shadow: 0 0 0 6px rgba(244, 188, 212, 0.25);
    }

    .nav-links { display: flex; gap: 12px; }

    .nav-links a {
      padding: 8px 14px;
      border-radius: 999px;
      background: var(--white);
      border: 1px solid rgba(244, 188, 212, 0.7);
      box-shadow: var(--shadow);
      font-weight: 600;
      font-size: 14px;
      transition: transform var(--transition), box-shadow var(--transition);
    }

    .nav-links a:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 24px rgba(244, 188, 212, 0.6);
    }

    main {
      max-width: 1080px;
      margin: 0 auto;
      padding: 110px 18px 64px;
      display: flex;
      flex-direction: column;
      gap: 72px;
    }

    section {
      background: var(--white);
      border-radius: 28px;
      padding: 36px 28px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(244, 188, 212, 0.4);
      position: relative;
      overflow: hidden;
    }

    .hero {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      align-items: center;
      gap: 32px;
      background: linear-gradient(145deg, var(--cream), var(--pink));
    }

    h1 {
      margin: 0 0 12px;
      font-size: clamp(28px, 5vw, 42px);
      color: var(--brown);
      letter-spacing: 1px;
    }

    p.lead {
      margin: 0 0 20px;
      color: var(--muted);
      line-height: 1.6;
      font-size: 16px;
    }

    .hero-cta { display: flex; flex-wrap: wrap; gap: 12px; }

    .dog-btn {
      position: relative;
      padding: 14px 18px 14px 44px;
      border: none;
      background: var(--white);
      border-radius: 18px;
      cursor: pointer;
      font-weight: 700;
      color: var(--brown);
      box-shadow: var(--shadow);
      transition: transform var(--transition), box-shadow var(--transition), background var(--transition);
      outline: none;
    }

    .dog-btn::before,
    .dog-btn::after {
      content: "";
      position: absolute;
      width: 16px;
      height: 18px;
      background: var(--rose);
      border-radius: 12px 12px 4px 4px;
      top: 6px;
      box-shadow: 0 4px 0 rgba(0, 0, 0, 0.05) inset;
    }

    .dog-btn::before { left: 10px; transform: rotate(-6deg); }
    .dog-btn::after  { left: 26px; transform: rotate( 6deg); }
    .dog-btn span { position: relative; z-index: 1; }

    .dog-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 16px 30px rgba(244, 188, 212, 0.6);
    }

    .dog-btn.active { background: var(--rose); color: var(--white); }

    .hero-illustration { width: 100%; max-width: 420px; margin: 0 auto; aspect-ratio: 1 / 1; }
    .hero svg { width: 100%; height: 100%; display: block; }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      background: var(--white);
      border-radius: 999px;
      font-weight: 600;
      color: var(--muted);
      border: 1px dashed rgba(244, 188, 212, 0.7);
      margin-bottom: 12px;
    }

    .section-title {
      margin: 0 0 10px;
      font-size: 26px;
      color: var(--brown);
      letter-spacing: 0.5px;
    }

    .placeholder { margin: 0; color: var(--muted); line-height: 1.7; }

    .work   { background: linear-gradient(160deg, var(--pink), var(--cream)); }
    .family { background: linear-gradient(200deg, var(--cream), var(--white)); }
    .personal{ background: linear-gradient(140deg, var(--white), var(--cream)); }

    .floating-dog {
      position: absolute;
      right: 14px;
      bottom: -12px;
      width: 180px;
      opacity: 0.16;
      pointer-events: none;
    }

    .paw {
      position: absolute;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: rgba(244, 188, 212, 0.35);
      filter: blur(2px);
      opacity: 0.6;
    }

    .paw::after, .paw::before {
      content: "";
      position: absolute;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: rgba(244, 188, 212, 0.35);
    }

    .paw::before { top: -6px; left: 8px; }
    .paw::after  { top:  8px; left: -6px; }

    .toggle-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin: 12px 0 18px;
    }

    .dog-icon-btn {
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      padding: 16px 16px 14px;
      min-width: 132px;
      background: var(--white);
      border: 1px solid rgba(244, 188, 212, 0.7);
      box-shadow: var(--shadow);
      transition: transform 140ms ease, box-shadow var(--transition), background var(--transition), border-color var(--transition);
    }

    .dog-icon-btn svg { width: 74px; height: 74px; }
    .dog-icon-btn::before, .dog-icon-btn::after { display: none; }

    .dog-icon-btn .label { font-weight: 700; color: var(--brown); letter-spacing: 0.3px; }

    .dog-icon-btn:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 16px 30px rgba(244, 188, 212, 0.6);
    }

    .dog-icon-btn.active {
      background: var(--rose);
      color: var(--white);
      border-color: #e19cbb;
      box-shadow: 0 18px 32px rgba(244, 188, 212, 0.65);
    }

    .dog-icon-btn.active .label { color: var(--white); }

    .card {
      background: var(--white);
      border-radius: 16px;
      padding: 16px;
      border: 1px solid rgba(244, 188, 212, 0.5);
      box-shadow: var(--shadow);
      margin-top: 6px;
    }

    .card h4 { margin: 0 0 6px; color: var(--brown); }
    .card p  { margin: 0; color: var(--muted); line-height: 1.6; }

    /* ===== MVP 區塊樣式 ===== */
    .mvp-box{
      margin-top: 14px;
      padding: 14px;
      border-radius: 16px;
      border: 2px dashed rgba(244, 188, 212, 0.9);
      background: linear-gradient(180deg, rgba(253, 241, 246, 0.75), rgba(255,255,255,0.9));
    }

    .mvp-title{
      margin: 0 0 10px;
      font-size: 14px;
      font-weight: 800;
      color: var(--brown);
      letter-spacing: 0.2px;
    }

    #store-buttons { display:flex; gap:10px; flex-wrap:wrap; margin: 8px 0 12px; }

    .store-btn {
      border: none;
      cursor: pointer;
      padding: 10px 12px;
      border-radius: 12px;
      background: var(--white);
      color: var(--brown);
      font-weight: 700;
      box-shadow: var(--shadow);
      border: 1px solid rgba(244,188,212,.7);
      transition: transform var(--transition), box-shadow var(--transition), background var(--transition);
    }

    .store-btn:hover { transform: translateY(-2px); box-shadow: 0 12px 24px rgba(244,188,212,.6); }
    .store-btn.active { background: var(--rose); color: var(--white); border-color: rgba(225,156,187,.9); }

    #video-list { margin: 0; padding-left: 22px; color: var(--muted); line-height: 1.7; }

    @media (max-width: 720px) {
      header { position: sticky; }
      .nav { flex-direction: column; align-items: flex-start; }
      main { padding-top: 96px; gap: 56px; }
      section { padding: 28px 22px; }
      .floating-dog { width: 130px; opacity: 0.22; }
    }
  </style>
</head>

<body>
<header>
  <div class="nav">
    <div class="logo">
      <span class="dot"></span>
      <span>Abby 的粉紅生活日常</span>
    </div>
    <nav class="nav-links">
      <a href="#work">工作</a>
      <a href="#family">家庭</a>
      <a href="#personal">個人</a>
    </nav>
  </div>
</header>

<main>
<!-- ✅ 分享連結 + 最後更新時間（新增） -->
<section id="share">
  <h2>分享這個網站</h2>

  <div class="card">
    <h4>分享連結</h4>
    <p>把下面這個網址貼給別人就能直接打開（不需要你的電腦開著）。</p>

    <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
      <input
        id="share-url"
        type="text"
        readonly
        style="flex:1; min-width:260px; padding:10px 12px; border-radius:12px; border:1px solid rgba(244,188,212,.8);"
      />
      <button
        id="copy-url"
        type="button"
        style="padding:10px 14px; border-radius:12px; border:1px solid rgba(244,188,212,.8); background: var(--cream); cursor:pointer;"
      >
        複製網址
      </button>
      <span id="copy-status" style="color: var(--muted);"></span>
    </div>

    <p style="margin-top:12px; color: var(--muted);">
      最後更新時間：<strong id="last-updated">讀取中…</strong>
    </p>
  </div>
</section>

  <section class="hero" id="hero">
    <div>
      <div class="tag">Pink Chihuahua Mood</div>
      <h1>粉色系 × 插畫風吉娃娃的日常陪伴</h1>
      <p class="lead">柔和的淺粉與奶油色，輕盈的留白，加上一隻愛撒嬌的吉娃娃插畫，陪你從工作到家庭，再到個人生活的小確幸。</p>
      <div class="hero-cta">
        <button class="dog-btn" data-target="#work"><span>工作</span></button>
        <button class="dog-btn" data-target="#family"><span>家庭</span></button>
        <button class="dog-btn" data-target="#personal"><span>個人生活</span></button>
      </div>
    </div>
    <div class="hero-illustration">
      <!-- 你原本的 SVG 插畫（保留） -->
      <svg viewBox="0 0 320 320" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs>
          <linearGradient id="fur" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#fbe3ea"/>
            <stop offset="100%" stop-color="#f7c9d9"/>
          </linearGradient>
        </defs>
        <circle cx="160" cy="160" r="150" fill="#fce8f0"/>
        <g>
          <path d="M70 110 C72 60 120 62 142 96 L126 132 Z" fill="url(#fur)" stroke="#e1a7bc" stroke-width="3" stroke-linejoin="round"/>
          <path d="M250 110 C248 60 200 62 178 96 L194 132 Z" fill="url(#fur)" stroke="#e1a7bc" stroke-width="3" stroke-linejoin="round"/>
          <path d="M110 250 C110 210 110 180 160 180 C210 180 210 210 210 250" fill="#fef6f9" stroke="#e1a7bc" stroke-width="3"/>
          <path d="M110 140 Q160 120 210 140 Q222 190 210 240 Q160 260 110 240 Q98 190 110 140 Z" fill="url(#fur)" stroke="#e1a7bc" stroke-width="3" />
          <ellipse cx="140" cy="168" rx="10" ry="14" fill="#3b2b25"/>
          <ellipse cx="180" cy="168" rx="10" ry="14" fill="#3b2b25"/>
          <circle cx="141" cy="164" r="3" fill="#fff"/>
          <circle cx="181" cy="164" r="3" fill="#fff"/>
          <path d="M158 184 Q160 188 162 184" stroke="#3b2b25" stroke-width="3" stroke-linecap="round"/>
          <path d="M150 196 Q160 206 170 196" fill="none" stroke="#d18c9f" stroke-width="4" stroke-linecap="round"/>
          <path d="M152 206 Q160 214 168 206" fill="#f2b8c7" stroke="#d18c9f" stroke-width="2" stroke-linecap="round"/>
          <circle cx="136" cy="188" r="6" fill="#f4c1d3" opacity="0.9"/>
          <circle cx="184" cy="188" r="6" fill="#f4c1d3" opacity="0.9"/>
        </g>
      </svg>
    </div>
  </section>

  <section id="work" class="work">
    <div class="paw" style="top:18px; left:18px;"></div>
    <div class="paw" style="bottom:24px; right:32px;"></div>
    <div class="tag">Work Mode</div>
    <h2 class="section-title">工作區</h2>
    <p class="placeholder">預留出版與工作內容，吉娃娃在旁溫柔守護，讓粉色系的靈感陪你完成每個案子。</p>
  </section>

  <section id="family" class="family">
    <div class="paw" style="top:14px; right:18px;"></div>
    <div class="paw" style="bottom:18px; left:32px;"></div>
    <div class="tag">Home Sweet Pink</div>
    <h2 class="section-title">家庭區</h2>
    <p class="placeholder">預留家庭記事與粉粉日常，吉娃娃腳印點綴，輕盈留白讓每段故事都有呼吸感。</p>
  </section>

  <section id="personal" class="personal">
    <div class="tag">Personal Picks</div>
    <h2 class="section-title">個人生活：新品開箱 × 超商必買</h2>

    <div class="toggle-row">
      <button class="dog-btn dog-icon-btn active" data-panel="unbox">
        <span class="label">新品開箱</span>
      </button>

      <button class="dog-btn dog-icon-btn" data-panel="conbini">
        <span class="label">超商必買</span>
      </button>
    </div>

    <div class="card" data-panel-content="unbox">
      <h4>新品開箱</h4>
      <p>預設顯示新品開箱心得。</p>
    </div>

    <div class="card" data-panel-content="conbini" style="display:none;">
      <h4>超商必買</h4>
      <p>切換後可看到超商必買清單。</p>

      <div class="mvp-box">
        <div class="mvp-title">YouTube 本月熱門影片（MVP）</div>

        <div id="store-buttons">
          <button class="store-btn" data-store="7-11">7-11</button>
          <button class="store-btn" data-store="全家">全家</button>
          <button class="store-btn" data-store="萊爾富">萊爾富</button>
        </div>

        <ol id="video-list">
          <li>（這裡會顯示影片清單）</li>
        </ol>
      </div>
    </div>
  </section>
</main>

<script>
  // hero 三顆按鈕（工作/家庭/個人）
  const heroButtons = document.querySelectorAll('.hero-cta .dog-btn');
  heroButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const target = document.querySelector(btn.dataset.target);
      if (!target) return;
      heroButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
  });

  // 新品開箱 / 超商必買切換
  const toggleButtons = document.querySelectorAll('[data-panel]');
  const toggleCards = document.querySelectorAll('[data-panel-content]');
  toggleButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const panel = btn.dataset.panel;
      toggleButtons.forEach(b => b.classList.toggle('active', b === btn));
      toggleCards.forEach(card => {
        card.style.display = (card.dataset.panelContent === panel) ? 'block' : 'none';
      });
    });
  });

  // ===== MVP：按超商按鈕 → 顯示影片清單（對齊你的 youtube.json 結構）=====
  let youtubeData = null;

  async function loadYoutubeData() {
    if (youtubeData) return youtubeData;
    const res = await fetch('data/youtube.json');
    if (!res.ok) throw new Error(`讀取 data/youtube.json 失敗：${res.status}`);
    youtubeData = await res.json();
    return youtubeData;
  }

  function renderVideos(store) {
    const list = document.getElementById('video-list');
    if (!list) return;

    const videos = (youtubeData && youtubeData[store]) ? youtubeData[store] : [];
    list.innerHTML = '';

    if (!videos.length) {
      list.innerHTML = `<li>（找不到 ${store} 的影片）</li>`;
      return;
    }

    for (const v of videos) {
      const li = document.createElement('li');
      const when = v.publishedAt ? new Date(v.publishedAt).toLocaleDateString('zh-TW') : '';
      const dur = v.duration ? `・${v.duration}` : '';
      const ch  = v.channel ? `・${v.channel}` : '';
      li.innerHTML =
        `<a href="${v.url}" target="_blank" rel="noreferrer">${v.title}</a>
         <span style="color:#8c6f64;">(${when}${dur}${ch})</span>`;
      list.appendChild(li);
    }
  }

  document.getElementById('store-buttons')?.addEventListener('click', async (e) => {
    const btn = e.target.closest('button[data-store]');
    if (!btn) return;

    try {
      const store = btn.dataset.store;

      document.querySelectorAll('#store-buttons .store-btn')
        .forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      await loadYoutubeData();
      renderVideos(store);
    } catch (err) {
      console.error(err);
      const list = document.getElementById('video-list');
      if (list) list.innerHTML = `<li>（發生錯誤：${err.message}）</li>`;
    }
  });
  
  // ✅ 1) 顯示分享網址 + 複製按鈕
  (function setupShareLink() {
    const url = window.location.href;
    const input = document.getElementById("share-url");
    const btn = document.getElementById("copy-url");
    const status = document.getElementById("copy-status");

    if (input) input.value = url;

    if (btn) {
      btn.addEventListener("click", async () => {
        try {
          await navigator.clipboard.writeText(url);
          if (status) status.textContent = "已複製";
          setTimeout(() => { if (status) status.textContent = ""; }, 1500);
        } catch (e) {
          // fallback（某些瀏覽器權限會擋剪貼簿）
          window.prompt("複製這個網址：", url);
        }
      });
    }
  })();

  // ✅ 2) 顯示「最後更新時間」：抓 data/youtube.json 的 Last-Modified
  (async function setupLastUpdated() {
    const el = document.getElementById("last-updated");
    if (!el) return;

    try {
      // 用 HEAD 取回 header（不下載整個 JSON）
      const res = await fetch("data/youtube.json", { method: "HEAD", cache: "no-store" });
      const lm = res.headers.get("last-modified");

      if (lm) {
        const d = new Date(lm);
        el.textContent = isNaN(d.getTime())
          ? lm
          : d.toLocaleString("zh-TW", { hour12: false });
      } else {
        // 如果拿不到 header，就退而求其次顯示「目前時間」
        el.textContent = new Date().toLocaleString("zh-TW", { hour12: false });
      }
    } catch (e) {
      el.textContent = "讀取失敗（稍後再試）";
    }
  })();
</script>
  <div id="last-updated" style="font-size:14px; opacity:0.75; margin-top:16px;">
  最後更新時間：讀取中…
</div>

<script>
  fetch('./data/last_run_taipei_local.txt', { cache: 'no-store' })
    .then(r => r.text())
    .then(t => {
      document.getElementById('last-updated').textContent = '最後更新時間：' + t.trim();
    })
    .catch(() => {
      document.getElementById('last-updated').textContent = '最後更新時間：讀取失敗';
    });
</script>
</body>
</html>
